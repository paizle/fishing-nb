import{R as v,j as n,r,x as p}from"./app-FcuIFFKM.js";import{p as u,N as L}from"./NewBrunswickMap-DMr3xwLv.js";const b=(h=300,a=10)=>{const[c,t]=v.useState(null),d=v.useRef(c);v.useEffect(()=>{d.current=c},[c]);const[f,e]=v.useState(null),m=v.useRef(f);return v.useEffect(()=>{m.current=f},[f]),{onTouchStart:s=>i=>{const l=i.touches[0];t({time:Date.now(),x:l.clientX,y:l.clientY}),e({x:l.clientX,y:l.clientY}),console.log("start")},onTouchMove:s=>i=>{const l=i.touches[0];e({x:l.clientX,y:l.clientY}),console.log("move")},onTouchEnd:s=>i=>{console.log({callback:s});const l=d.current,j=m.current;if(console.log("end"),l){const E=Date.now()-l.time,S=Math.abs(l.x-j.x),w=Math.abs(l.y-j.y);E<=h&&S<=a&&w<=a&&s(i)}t(null),e(null)}}};function x({containerRef:h=null,onTouchLocation:a}){const c=h||v.createRef(null),t=b();return v.useEffect(()=>{if(c.current){const d=c.current.querySelector("svg");Object.keys(u).forEach(f=>{const e=d.querySelector("#"+f);e.classList.add("location"),a&&(e.addEventListener("touchstart",t.onTouchStart(()=>null)),e.addEventListener("touchmove",t.onTouchMove(()=>null)),e.addEventListener("touchend",t.onTouchEnd(m=>{Object.keys(u).forEach(g=>{d.querySelector("#"+g).classList.remove("active")}),d.querySelector("#"+f).classList.add("active"),a(m,f)})),e.addEventListener("click",m=>{Object.keys(u).forEach(g=>{d.querySelector("#"+g).classList.remove("active")}),d.querySelector("#"+f).classList.add("active"),a(m,f)}))})}},[c.current]),n.jsx(L,{containerRef:c})}function T({title:h,titleId:a,...c},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},c),h?r.createElement("title",{id:a},h):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm4.28 10.28a.75.75 0 0 0 0-1.06l-3-3a.75.75 0 1 0-1.06 1.06l1.72 1.72H8.25a.75.75 0 0 0 0 1.5h5.69l-1.72 1.72a.75.75 0 1 0 1.06 1.06l3-3Z",clipRule:"evenodd"}))}const M=r.forwardRef(T);function P({title:h,titleId:a,...c},t){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},c),h?r.createElement("title",{id:a},h):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"}))}const N=r.forwardRef(P);function y({locations:h}){const a=r.useRef(null),c=r.useRef(null),[t,d]=r.useState(null),f=r.useRef(t);r.useEffect(()=>{f.current=t},[t]);const e=h.reduce((o,s)=>(o[s.name]=s,o),{}),m=o=>{const s=u[o];return e[s]};function g(o){R(null,"")}const R=(o,s)=>{c.current.querySelectorAll(".highlighted").forEach(i=>i.classList.remove("highlighted")),s?(c.current.classList.add("selected"),c.current.querySelector(`[data-path-id=${s}]`).classList.add("highlighted"),d(s)):(c.current.classList.remove("selected"),d(null))};return n.jsx("div",{className:`MapMobile portrait ${t?"selected-location":""}`,children:n.jsxs("div",{className:"container",children:[n.jsx(x,{containerRef:a,onTouchLocation:R}),n.jsxs("div",{className:"locations",ref:c,children:[n.jsx("button",{className:"close",onClick:g,children:n.jsx(N,{})}),n.jsx("ul",{children:Object.keys(u).map(o=>{var s,i;return n.jsx("li",{"data-path-id":o,children:n.jsxs(p,{className:e!=null&&e[u[o]].hasData?"":"disabled",href:route("location.region",{id:m(o).id}),onClick:l=>{var j;if(!((j=e==null?void 0:e[u[o]])!=null&&j.hasData))return l.preventDefault(),!1},children:[n.jsx("h3",{children:u[o]}),n.jsxs("em",{children:[!((s=e==null?void 0:e[u[o]])!=null&&s.hasData)&&n.jsx("strong",{children:"(no data)"}),(i=e==null?void 0:e[u[o]])==null?void 0:i.description]})]})},o)})}),t&&n.jsx(p,{className:"go "+(e!=null&&e[u[t]].hasData?"":"disabled"),href:route("location.region",{id:m(t).id}),children:e!=null&&e[u[t]].hasData?n.jsx(M,{}):null})]})]})})}export{y as default};
