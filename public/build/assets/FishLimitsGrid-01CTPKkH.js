import{r as w,j as a}from"./app-D5pR-9hC.js";import{p,i as l,a as x,f as j,c as u}from"./parseMySqlDate-1ZJKP2sH.js";/* empty css                */import{u as S}from"./useScreenOrientation-CNDFi_ER.js";import{g as F}from"./getFishImageSrc-bMjek-YH.js";function D(n){var t,r,s,d;return{id:n.id,seasonStart:p(n.season_start),seasonEnd:p(n.season_end),bagLimit:n.bag_limit,minSize:n.minimum_size,maxSize:n.maximum_size,fishingMethod:z(n),tidal:((t=n==null?void 0:n.tidal_category)==null?void 0:t.name)??"",water:((r=n==null?void 0:n.water)==null?void 0:r.name)??"",watersCategory:((s=n==null?void 0:n.waters_category)==null?void 0:s.name)??"",boundary:((d=n==null?void 0:n.boundary)==null?void 0:d.name)??"",waterDescription:n.water_description??""}}function z(n){var r,s;let t="";return((r=n==null?void 0:n.fishing_method)==null?void 0:r.name)==="May only be angled by artificial fly or baited barbless hook with a single point"?t="Fly Fishing":t=((s=n==null?void 0:n.fishing_method)==null?void 0:s.name)??"",t}function L(n){return n.reduce((t,r)=>{let s=0,d=!1;for(;!d&&s<t.length;)!t[s].waterDescription&&l(r.seasonStart,t[s].seasonStart)&&l(r.seasonEnd,t[s].seasonEnd)&&r.bagLimit===t[s].bagLimit&&r.minimumSize===t[s].minimumSize&&r.maximumSize===t[s].maximumSize&&(d=!0,r.fishingMethod!==t[s].fishingMethod&&(t[s].fishingMethod=""),r.tidal!==t[s].tidal&&(t[s].tidal="")),s++;return d||t.push(r),t},[])}function N(n){return n.sort((t,r)=>{const s=x(t.seasonStart,r.seasonStart);return s===0?r.fishingMethod||r.tidal||r.waterDescription?-1:x(r.seasonEnd,t.seasonEnd):s})}function E(n){if(!n.length)return;const t=n.reduce((r,s)=>{var i;const d=((i=s==null?void 0:s.fish)==null?void 0:i.name)??null;if(!r[d]){const c={limits:[]};r[d]=c}return r[d].limits.push(D(s)),r},{});return Object.keys(t).forEach(r=>{t[r].limits=L(t[r].limits),t[r].limits=N(t[r].limits);const s={};let d=0;for(;d<t[r].limits.length;){const i=t[r].limits[d],c=[i.fishingMethod,i.tidal,i.waterDescription,i.water,i.border,i.watersCategory].join("-");s[c]?(s[c].group||(s[c].group=[]),s[c].group.push(i),t[r].limits.splice(d,1)):(s[c]=i,d++)}}),t}function A({limits:n,fishes:t}){const r=E(n),s=S(),d=w.useRef(null),i=(e,o=!1)=>a.jsxs(a.Fragment,{children:[a.jsxs("span",{children:[j(e.seasonStart,s.isMobile?u.displayDayMonthShortFormat:u.displayDayMonthFormat)," "]}),a.jsxs("span",{children:["-"," ",j(e.seasonEnd,s.isMobile?u.displayDayMonthShortFormat:u.displayDayMonthFormat),o?",":""]})]}),c=e=>{let o="";return!e.water&&e.watersCategory&&(o+=e.watersCategory+": "),e.tidal&&(o+=e.tidal),e.boundary&&(o+=e.tidal?", ":"",o+=o?" ":"",o+=e.boundary),e.waterDescription&&!e.water&&(o+=e.boundary),e.water&&(o=e.water+(o?": ":" ")+o),e.fishingMethod&&(o=e.fishingMethod+" in "+o),e.waterDescription&&(o+=o?" ":"",o+=e.waterDescription)," "+o},m=e=>{const o=(e==null?void 0:e.minSize)??"N/A";return e.bagLimit===0?a.jsx("span",{className:"invalid",children:o}):o},y=e=>{const o=(e==null?void 0:e.maxSize)??"N/A";return e.bagLimit===0?a.jsx("span",{className:"invalid",children:o}):o},M=e=>e.bagLimit===null?a.jsx("span",{className:"text-md leading-4",children:"âˆž"}):e.bagLimit,g=(e,o=!1,h=!1)=>a.jsxs("div",{className:`limit ${o&&!e.group?"sub-group":""}`,children:[a.jsxs("div",{className:"season-exception",children:[a.jsx("strong",{className:"date-range",children:i(e,e.group||o&&!h)}),!o&&!e.group&&a.jsx("em",{className:"water-description",children:c(e)})]}),a.jsx("div",{children:M(e)}),a.jsx("div",{children:m(e)}),a.jsx("div",{children:y(e)})]}),f=(e,o=!1)=>e.map((h,b)=>h!=null&&h.group?a.jsxs(a.Fragment,{children:[g(h),f(h.group,!0),a.jsx("em",{className:"group-water-description",children:c(h)})]}):a.jsx(a.Fragment,{children:g(h,o,b===e.length-1)}));return a.jsx("div",{className:"FishLimitsGrid",ref:d,children:a.jsx("div",{className:"body",children:Object.keys(r??{}).map((e,o)=>a.jsx(a.Fragment,{children:a.jsxs("div",{className:"fish-row-container",children:[a.jsx("div",{className:`fish-name ${o%2===0?"even":"odd"}`,children:a.jsx("strong",{children:e})}),a.jsx("div",{className:`fish-image ${o%2===0?"even":"odd"}`,children:a.jsx("img",{src:F(e)})}),a.jsxs("div",{className:"header",children:[a.jsxs("div",{className:"column-header date-range",children:[!s.isMobile&&a.jsx(a.Fragment,{children:"Season/"}),"Restrictions"]}),a.jsx("div",{className:"column-header",children:"Bag Limit"}),a.jsxs("div",{className:"column-header",children:[s.isMobile?"Min.":"Minimum"," ","Size"]}),a.jsxs("div",{className:"column-header",children:[s.isMobile?"Max.":"Maximum"," ","Size"]})]}),a.jsx("div",{className:`limits ${o%2===0?"even":"odd"}`,children:f(r[e].limits)})]},e)}))})})}export{A as default};
