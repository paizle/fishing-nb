import{r as M,j as s}from"./app-Br8trWyA.js";import{p,a as x,f as j,c as u}from"./parseMySqlDate-C6UWLuIo.js";/* empty css                */import{u as S}from"./useScreenOrientation-CiqlxzKg.js";import{g as F}from"./getFishImageSrc-bMjek-YH.js";function m(r){var o,t,a,d;return{id:r.id,seasonStart:p(r.season_start),seasonEnd:p(r.season_end),bagLimit:r.bag_limit,minSize:r.minimum_size,maxSize:r.maximum_size,fishingMethod:v(r),tidal:((o=r==null?void 0:r.tidal_category)==null?void 0:o.name)??"",water:((t=r==null?void 0:r.water)==null?void 0:t.name)??"",watersCategory:((a=r==null?void 0:r.waters_category)==null?void 0:a.name)??"",boundary:((d=r==null?void 0:r.boundary)==null?void 0:d.name)??"",waterDescription:r.water_description??""}}function v(r){var t,a;let o="";return((t=r==null?void 0:r.fishing_method)==null?void 0:t.name)==="May only be angled by artificial fly or baited barbless hook with a single point"?o="Fly Fishing":o=((a=r==null?void 0:r.fishing_method)==null?void 0:a.name)??"",o}function N(r){return r.sort((o,t)=>{const a=x(o.seasonStart,t.seasonStart);return a===0?o.water||o.fishingMethod||o.tidal||o.waterDescription?1:x(t.seasonEnd,o.seasonEnd):a})}function D(r){if(!r.length)return;const o=r.reduce((t,a)=>{var c;const d=((c=a==null?void 0:a.fish)==null?void 0:c.name)??null;if(!t[d]){const i={limits:[]};t[d]=i}return t[d].limits.push(m(a)),t},{});return Object.keys(o).forEach(t=>{o[t].limits=N(o[t].limits);const a={};let d=0;for(;d<o[t].limits.length;){const c=o[t].limits[d],i=[c.fishingMethod,c.tidal,c.waterDescription,c.water,c.border,c.watersCategory].join("-");a[i]?(a[i].group||(a[i].group=[]),a[i].group.push(c),o[t].limits.splice(d,1)):(a[i]=c,d++)}}),o}function C({limits:r,fishes:o}){const t=D(r),a=S(),d=M.useRef(null),c=(e,n=!1)=>s.jsxs(s.Fragment,{children:[s.jsxs("span",{children:[j(e.seasonStart,a.isMobile?u.displayDayMonthShortFormat:u.displayDayMonthFormat)," "]}),s.jsxs("span",{children:["-"," ",j(e.seasonEnd,a.isMobile?u.displayDayMonthShortFormat:u.displayDayMonthFormat),n?",":""]})]}),i=e=>{let n="";return!e.water&&e.watersCategory&&(n+=e.watersCategory+": "),e.tidal&&(n+=e.tidal),e.boundary&&(n+=e.tidal?", ":"",n+=n?" ":"",n+=e.boundary),e.waterDescription&&!e.water&&(n+=e.boundary),e.water&&(n=e.water+(n?": ":" ")+n),e.fishingMethod&&(n=e.fishingMethod+" in "+n),e.waterDescription&&(n+=n?" ":"",n+=e.waterDescription)," "+n},l=e=>{const n=(e==null?void 0:e.minSize)??"N/A";return e.bagLimit===0?s.jsx("span",{className:"invalid",children:n}):n},y=e=>{const n=(e==null?void 0:e.maxSize)??"N/A";return e.bagLimit===0?s.jsx("span",{className:"invalid",children:n}):n},b=e=>e.bagLimit===null?s.jsx("span",{className:"text-md leading-4",children:"âˆž"}):e.bagLimit,g=(e,n=!1,h=!1)=>s.jsxs("div",{className:`limit ${n&&!e.group?"sub-group":""}`,children:[s.jsxs("div",{className:"season-exception",children:[s.jsx("strong",{className:"date-range",children:c(e,e.group||n&&!h)}),!n&&!e.group&&s.jsx("em",{className:"water-description",children:i(e)})]}),s.jsx("div",{children:b(e)}),s.jsx("div",{children:l(e)}),s.jsx("div",{children:y(e)})]}),f=(e,n=!1)=>e.map((h,w)=>h!=null&&h.group?s.jsxs(s.Fragment,{children:[g(h),f(h.group,!0),s.jsx("em",{className:"group-water-description",children:i(h)})]}):s.jsx(s.Fragment,{children:g(h,n,w===e.length-1)}));return s.jsx("div",{className:"FishLimitsGrid",ref:d,children:s.jsx("div",{className:"body",children:Object.keys(t??{}).map((e,n)=>s.jsx(s.Fragment,{children:s.jsxs("div",{className:"fish-row-container",children:[s.jsx("div",{className:`fish-name ${n%2===0?"even":"odd"}`,children:s.jsx("strong",{children:e})}),s.jsx("div",{className:`fish-image ${n%2===0?"even":"odd"}`,children:s.jsx("img",{src:F(e)})}),s.jsxs("div",{className:"header",children:[s.jsxs("div",{className:"column-header date-range",children:[!a.isMobile&&s.jsx(s.Fragment,{children:"Season/"}),"Restrictions"]}),s.jsx("div",{className:"column-header",children:"Bag Limit"}),s.jsxs("div",{className:"column-header",children:[a.isMobile?"Min.":"Minimum"," ","Size"]}),s.jsxs("div",{className:"column-header",children:[a.isMobile?"Max.":"Maximum"," ","Size"]})]}),s.jsx("div",{className:`limits ${n%2===0?"even":"odd"}`,children:f(t[e].limits)})]},e)}))})})}export{C as default};
